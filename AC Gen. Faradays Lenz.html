<!doctype html><html><head></head><body><!doctype html><html><head></head><body><!doctype html>
<html>

<head></head>

<body>
	<!DOCTYPE html>
	<html lang="en">

	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>AC Generator + Faraday + Lenz Law (Mobile Friendly)</title>
		<style>
			* {
				box-sizing: border-box;
			}

			body {
				font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
				background: linear-gradient(135deg, #b2ebf2, #bbdefb);
				margin: 0;
				padding: 0;
				color: #222;
			}

			header {
				background: #005f99;
				color: white;
				padding: 15px 10px;
				text-align: center;
				box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
			}

			h1 {
				font-size: 1.5em;
				text-align: center;
				margin: 0;
			}

			p {
				margin: 10px 15px;
				font-size: 1em;
			}

			#controls {
				display: flex;
				flex-wrap: wrap;
				justify-content: center;
				gap: 10px;
				padding: 10px 0;
				background: #ffffff;
				box-shadow: inset 0 -1px 0 #ccc;
			}

			button {
				background: #007acc;
				color: white;
				border: none;
				border-radius: 5px;
				padding: 8px 16px;
				font-size: 16px;
				cursor: pointer;
				transition: background 0.3s ease;
			}

			button:hover {
				background: #005f99;
			}

			label {
				font-weight: 600;
				display: flex;
				align-items: center;
				gap: 6px;
				font-size: 16px;
			}

			input[type="range"] {
				width: 120px;
			}

			#formula {
				background: #fefefe;
				margin: 15px auto;
				padding: 15px 20px;
				max-width: 600px;
				border-left: 4px solid #007acc;
				box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);
				font-size: 16px;
				text-align: left;
			}

			#canvas {
			width: 100vw;
			height: auto;
			border: 1px solid #333;
			background: #fff;
			display: block;
			max-width: 1000px;
			margin: 0 auto; /* Horizontally center the canvas */
			position: relative;
			}
			#speedDisplay {
				font-weight: bold;
			}
		</style>
	</head>

	<body>

		<h1>AC Generator + Faraday's + Lenz's Law</h1>
		<p>Drag magnets left/right to change magnetic field & observe induced EMF.</p>

		<div id="formula">
			<div> Induced EMF Formula</div>
			<p><strong>&mu; = -N x (d &phi; / dt)</strong></p>

		</div>

		<div id="controls">
			<button onclick="toggleRotation()"><span id="btnText">Start</span> Generator</button>
			<label>Speed:
      <input type="range" min="0.01" max="0.3" step="0.01" value="0.05" onchange="updateSpeed(this.value)" id="speedSlider">
      <span id="speedDisplay">0.05</span>
    </label>
		</div>

		<canvas id="canvas" width="1000" height="550"></canvas>

		<script>
			const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");

    

    let angle = 0;
    let speed = 0.05;
    let isRunning = false;
    let wave = [];
    let draggingMagnet = null;

    let magnetLeft = { x: 40, y: 180, width: 40, height: 160 };
    let magnetRight = { x: 420, y: 180, width: 40, height: 160 };

    const centerX = 250;
    const centerY = 260;

	  canvas.addEventListener("mousedown", (e) => {
	    const rect = canvas.getBoundingClientRect();
	    const mouseX = (e.clientX - rect.left) * (canvas.width / rect.width);
	    const mouseY = (e.clientY - rect.top) * (canvas.height / rect.height);
	    if (mouseX > magnetLeft.x && mouseX < magnetLeft.x + magnetLeft.width && mouseY> magnetLeft.y && mouseY < magnetLeft.y +
			  magnetLeft.height) { draggingMagnet=magnetLeft; } else if (mouseX> magnetRight.x && mouseX < magnetRight.x +
				  magnetRight.width && mouseY> magnetRight.y && mouseY < magnetRight.y + magnetRight.height) {
					  draggingMagnet=magnetRight; } });

    canvas.addEventListener("mouseup", () => draggingMagnet = null);

// Touch events to handle dragging on mobile
    canvas.addEventListener("touchstart", (e) => {
      e.preventDefault(); // Prevent default touch behavior
      const rect = canvas.getBoundingClientRect();
      const touchX = (e.touches[0].clientX - rect.left) * (canvas.width / rect.width);
      const touchY = (e.touches[0].clientY - rect.top) * (canvas.height / rect.height);
      if (touchX > magnetLeft.x && touchX < magnetLeft.x + magnetLeft.width &&
          touchY > magnetLeft.y && touchY < magnetLeft.y + magnetLeft.height) {
          draggingMagnet = magnetLeft;
      } else if (touchX > magnetRight.x && touchX < magnetRight.x + magnetRight.width &&
          touchY > magnetRight.y && touchY < magnetRight.y + magnetRight.height) {
          draggingMagnet = magnetRight;
        }
    });

    canvas.addEventListener("touchend", () => draggingMagnet = null);

    canvas.addEventListener("mousemove", (e) => {
      if (draggingMagnet) {
        const rect = canvas.getBoundingClientRect();
        const mouseX = (e.clientX - rect.left) * (canvas.width / rect.width);
        draggingMagnet.x = mouseX - draggingMagnet.width / 2;
        if (draggingMagnet === magnetLeft && draggingMagnet.x > magnetRight.x - 100)
            draggingMagnet.x = magnetRight.x - 100;
        if (draggingMagnet === magnetRight && draggingMagnet.x < magnetLeft.x + 100)
            draggingMagnet.x = magnetLeft.x + 100;
      }
    });

    canvas.addEventListener("touchmove", (e) => {
      if (draggingMagnet) {
        const rect = canvas.getBoundingClientRect();
        const touchX = (e.touches[0].clientX - rect.left) * (canvas.width / rect.width);
        draggingMagnet.x = touchX - draggingMagnet.width / 2;
        if (draggingMagnet === magnetLeft && draggingMagnet.x > magnetRight.x - 100)
            draggingMagnet.x = magnetRight.x - 100;
        if (draggingMagnet === magnetRight && draggingMagnet.x < magnetLeft.x + 100)
            draggingMagnet.x = magnetLeft.x + 100;
      }
    });

    function toggleRotation() {
      isRunning = !isRunning;
      document.getElementById("btnText").innerText = isRunning ? "Stop" : "Start";
    }

    function updateSpeed(val) {
      speed = parseFloat(val);
      document.getElementById("speedDisplay").innerText = val;
    }

    function drawMagnets() {
  // Draw the left magnet in red
      ctx.fillStyle = "red";
      ctx.fillRect(magnetLeft.x, magnetLeft.y, magnetLeft.width, magnetLeft.height);

  // Draw the right magnet in blue
      ctx.fillStyle = "blue";
      ctx.fillRect(magnetRight.x, magnetRight.y, magnetRight.width, magnetRight.height);

  // Set the text color to white
      ctx.fillStyle = "black";
      ctx.font = "20px Arial";

  // Display N and S labels
      ctx.fillText("N", magnetLeft.x + 12, magnetLeft.y - 10);
      ctx.fillText("S", magnetRight.x + 12, magnetRight.y - 10);

  // Draw lines between magnets
      ctx.strokeStyle = "#00aa00";
      ctx.setLineDash([4, 4]);
      for (let i = 0; i < 6; i++) {
        ctx.beginPath();
        ctx.moveTo(magnetLeft.x + magnetLeft.width, magnetLeft.y + 10 + i * 25);
        ctx.lineTo(magnetRight.x, magnetRight.y + 10 + i * 25);
        ctx.stroke();
      }
      ctx.setLineDash([]);
    }


    function drawCoil(amplitude) {
      const size = 100;
      const x1 = centerX + size * Math.cos(angle);
      const y1 = centerY + size * Math.sin(angle);
      const x2 = centerX - size * Math.cos(angle);
      const y2 = centerY - size * Math.sin(angle);

      ctx.strokeStyle = "brown";
      ctx.lineWidth = 4;
      ctx.beginPath();
      ctx.moveTo(x1, y1);
      ctx.lineTo(x2, y2);
      ctx.stroke();

      ctx.beginPath();
      ctx.arc(centerX, centerY, 105, 0, 2 * Math.PI);
      ctx.strokeStyle = "gray";
      ctx.lineWidth = 1;
      ctx.stroke();

      const emf = amplitude * Math.sin(angle);
      ctx.beginPath();
      if (emf > 0) {
        ctx.moveTo(centerX - 40, centerY - 10);
        ctx.lineTo(centerX - 20, centerY - 10);
        ctx.lineTo(centerX - 25, centerY - 15);
        ctx.moveTo(centerX - 20, centerY - 10);
        ctx.lineTo(centerX - 25, centerY - 5);
      } else {
        ctx.moveTo(centerX + 40, centerY + 10);
        ctx.lineTo(centerX + 20, centerY + 10);
        ctx.lineTo(centerX + 25, centerY + 5);
        ctx.moveTo(centerX + 20, centerY + 10);
        ctx.lineTo(centerX + 25, centerY + 15);
      }
      ctx.strokeStyle = "#ff6600";
      ctx.lineWidth = 2;
      ctx.stroke();
    }

	  function drawVoltmeter(voltage) {
	    ctx.fillStyle = "#222";
	    ctx.fillRect(600, 100, 180, 180);
	
	    ctx.beginPath();
	    ctx.arc(690, 190, 70, Math.PI, 0);
	    ctx.fillStyle = "white";
	    ctx.fill();
	    ctx.stroke();
	
	    ctx.fillStyle = "#000";
	    ctx.font = "14px Arial";
	    ctx.fillStyle = "white";
	    ctx.fillText("-V", 603, 190);
	    ctx.fillText("0", 685, 210);
	    ctx.fillText("+V", 760, 190);
	
	// Calculate the angle, clamped between -Math.PI/2 and Math.PI/2
	    let angle = (voltage / 100) * Math.PI; // Scaled to the half-circle (Ï€)
	    angle = Math.max(-Math.PI / 2, Math.min(angle, Math.PI / 2)); // Clamped within the limits
	
	// Adjust needle angle based on voltage value
	    const x = 690 + 60 * Math.cos(Math.PI / 2 - angle); // Adjust to rotate around the center
	    const y = 190 - 60 * Math.sin(Math.PI / 2 - angle);
	
	// Draw the needle from the center (690, 190) to the calculated position
	    ctx.beginPath();
	    ctx.moveTo(690, 190); // Center of the voltmeter
	    ctx.lineTo(x, y); // Calculate end position based on the voltage
	    ctx.strokeStyle = "red";
	    ctx.lineWidth = 3;
	    ctx.stroke();
	    
            ctx.fillStyle = "black";
	    ctx.fillText("Voltmeter", 640, 85);
	  }
      

    function drawSineGraph() {
      ctx.fillStyle = "white";
      ctx.fillRect(500, 320, 470, 160);
      ctx.strokeStyle = "black";
      ctx.strokeRect(500, 320, 470, 160);

      ctx.beginPath();
      ctx.moveTo(500, 400);
      ctx.lineTo(970, 400);
      ctx.moveTo(500, 320);
      ctx.lineTo(500, 480);
      ctx.strokeStyle = "#999";
      ctx.stroke();

      ctx.beginPath();
      ctx.moveTo(500, 400 - wave[0]);
      for (let i = 1; i < wave.length; i++) {
        ctx.lineTo(500 + i, 400 - wave[i]);
      }
      ctx.strokeStyle = "green";
      ctx.lineWidth = 2;
      ctx.stroke();

      ctx.fillStyle = "black";
      ctx.fillText("Induced Voltage (AC Output)", 630, 495);
    }

    function animate() {
      if (isRunning) {
        angle += speed;

        const distance = magnetRight.x - (magnetLeft.x + magnetLeft.width);
        const maxAmp = 200;
        const minDist = 60;
        const maxDist = 450;
        const normalized = 1 - Math.min(1, Math.max(0, (distance - minDist) / (maxDist - minDist)));
        const amplitude = maxAmp * normalized;

        const voltage = amplitude * Math.sin(angle);

        wave.unshift(voltage);
        if (wave.length > 470) wave.pop();

        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawMagnets();
        drawCoil(amplitude);
        drawVoltmeter(voltage);
        drawSineGraph();
      } else {
        ctx.clearRect(0, 0, canvas.width, canvas.height);
        drawMagnets();
        drawCoil(0);
        drawVoltmeter(0);
        drawSineGraph();
      }

      requestAnimationFrame(animate);
    }

    animate();
		</script>

	</body>

	</html>
</body>
<html></body><html></body><html>